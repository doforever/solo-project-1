import Popup from"./popup.js";import{templates,select,classNames}from"../settings.js";import Contact from"./contact.js";class Chat extends Popup{constructor(t,e){super(),this.dataObject=this.prepareData(t,e),this.template=templates.popupChat}prepareData(t,e){return{title:t,type:e}}chooseContact(t){this.contact=new Contact(this.dataObject.type,t),this.dataObject.contactStatus=this.contact.status,this.dataObject.contactName=this.contact.nick,this.dataObject.contactAvatar=this.contact.avatar}open(t){this.chooseContact(t),super.open()}getElements(){this.dom.send=this.dom.element.querySelector(select.popup.buttonConfirm),this.dom.message=this.dom.element.querySelector(select.popup.chatMessageInput),this.dom.conversation=this.dom.element.querySelector(select.popup.chatConversation)}initActions(){super.initActions(),this.dom.send.addEventListener("click",t=>{t.preventDefault(),this.sendMessage()})}sendMessage(){const t=this.dom.message.value.trim();if(t){let e=document.createElement("div");e.innerText=t,e.classList.add(classNames.popup.chatMessage),this.dom.conversation.appendChild(e),e.scrollIntoView()}this.dom.message.value=""}}export default Chat;